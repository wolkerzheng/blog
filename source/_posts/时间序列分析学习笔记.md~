---
title: 时间序列分析学习笔记
date: 2017-03-06 17:04:24
tags:
---

### 时间序列
时间序列是按时间顺序的一组数字序列。时间序列分析就是利用这组数列，应用数理统计方法加以处理，以预测未来事物的发展。时间序列分析是定量预测方法之一，它的基本原理：一是承认事物发展的延续性。应用过去数据，就能推测事物的发展趋势。二是考虑到事物发展的随机性。任何事物发展都可能受偶然因素影响，为此要利用统计分析中加权平均法对历史数据进行处理。该方法简单易行，便于掌握，但准确性差，一般只适用于短期预测。时间序列预测一般反映三种实际变化规律:趋势变化、周期性变化、随机性变化。

时间序列分析是根据系统观测得到的时间序列数据，通过曲线拟合和参数估计来建立数学模型的理论和方法。它一般采用曲线拟合和参数估计方法（如非线性最小二乘法）进行。时间序列分析常用在国民经济宏观控制、区域综合发展规划、企业经营管理、市场潜量预测、气象预报、水文预报、地震前兆预报、农作物病虫灾害预报、环境污染控制、生态平衡、天文学和海洋学等方面。

一个时间序列通常由4种要素组成：趋势、季节变动、循环波动和不规则波动。
趋势：是时间序列在长时期内呈现出来的持续向上或持续向下的变动。
季节变动：是时间序列在一年内重复出现的周期性波动。它是诸如气候条件、生产条件、节假日或人们的风俗习惯等各种因素影响的结果。
循环波动：是时间序列呈现出的非固定长度的周期性变动。循环波动的周期可能会持续一段时间，但与趋势不同，它不是朝着单一方向的持续变动，而是涨落相同的交替波动。
不规则波动：是时间序列中除去趋势、季节变动和周期波动之后的随机波动。不规则波动通常总是夹杂在时间序列中，致使时间序列产生一种波浪形或震荡式的变动。只含有随机波动的序列也称为平稳序列。

### 时间序列分析过程

1.获取时间序列数据
2.检验时间序列的稳定性和纯随机性
3.化为平稳时间序列
4.时间序列预测

### 时间序列分析模型

1.自回归模型
2.移动平均模型
3.自回归移动平均模型

时间序列:
1.平稳序列
2.非平稳序列
	有趋势序列
	复合型序列

移动平均模型 MA(q) (Moving Average)
自回归模型 AR(p) (Autoregression)
混合自回归移动平均模型 ARMA(p,q)
差分自回归-移动平均模型 ARIMA(p,d,q)
p为自回归项,d为差分阶数,q为移动平均项数

ARMA
一种精度较高的时间序列短期预测方法,其基本思想:某些时间序列是依赖于时间t的一族随机变量,构成该时间序列的单个序列值虽然具有不确定性,但整个序列的变化却有一定的规律性,可以用相应的数学模型近似描述.
#### 平稳时间序列建模
某个时间序列经过预处理,被判定为平稳非白噪声序列,就可以进行时间序列建模.
建模步骤:
1.计算出该序列的自相关系数(ACF)和偏相关系数(PACF)
2.模型识别.根据系数情况从AR模型,MA模型,ARMA模型,ARIMA模型中选择合适模型.

#### 检验时间序列的稳定性
如果一个时间序列的统计特征如平均数,方差随时间保持不变,不随时间变化的自协方差,就可以认为它是稳定的.

测试稳定性的方法:
1.绘制滚动统计图:绘制移动平均数和移动方差,观察其是否随时间变化.
2.DF检验:统计测试.

导致时间不稳定性的主要原因大致有:
1.趋势,随着时间产生不同的平均值
2.季节性,特定时间内框架的变化
故得从时间序列中找到并删除这些因素,得到一个平稳的时间序列

消除趋势,可以通过变换,惩罚较高值.
差分:采用一个特定时间差的差值
分解:建立有关趋势和季节性的模型和从模型中删除它们

建立差分后的时间序列模型，因为它是很受欢迎的技术，也相对更容易添加噪音和季节性倒回到预测残差。在执行趋势和季节性评估技术上,有两种情况:
1.不含依赖值的严格稳定系列。简单的情况下,可以建立残差模型作为白噪音（指功率谱密度在整个频域内均匀分布的噪声）。
2.序列含有明显的依赖值。在这种情况下,需要使用一些统计模型像ARIMA（差分自回归移动平均模型）来预测数据。

ARIMA代表自回归整合移动平均数。平稳时间序列的ARIMA预测的只不过是一个线性方程(如线性回归)。预测依赖于ARIMA模型参数(p d q)。
1.自回归函数（AR）的条件（p）：AR条件仅仅是因变量的滞后。如：如果P等于5，那么预测x（t）将是x（t-1）...（t-5）。
2.移动平均数(MA)的条件(q):MA条件是预测方程的滞后预测错误。如：如果q等于5，预测x（t）将是e（t-1）...e(t-5),e(i)是移动平均叔在第ith个瞬间和实际值的差值。
3.差分（d）：有非季节性的差值，即这种情况下我们采用一阶差分。所以传递变量，令d=0或者传递原始变量，令d=1。两种方法得到的结果一样。


如何确定“p”和“q”的值:
1.自相关函数（ACF）：这是时间序列和它自身滞后版本之间的相关性的测试。比如在自相关函数可以比较时间的瞬间‘t1’…’t2’以及序列的瞬间‘t1-5’…’t2-5’ (t1-5和t2 是结束点)。
2.偏相关函数(PACF):这是时间序列和它自身滞后版本之间的相关性测试，但是是在预测（已经通过比较干预得到解释）的变量后。如：滞后值为5，它将检查相关性，但是会删除从滞后值1到4得到的结果。


文章介绍:https://www.analyticsvidhya.com/blog/2016/02/time-series-forecasting-codes-python/

代码:https://github.com/aarshayj/Analytics_Vidhya/tree/master/Articles

